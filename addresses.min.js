function z(e,t){if("css"==t){var n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("href",e)}void 0!==n&&document.getElementsByTagName("head")[0].appendChild(n)}!function(e){function t(e,t){var n,i,d;if($province=$('select[data-address-type="province"][data-address-zone="'+e+'"]'),$province){for(n=['<option value="" hidden>-- Chọn --</option>'],i=0;i<r.length;i++)(d=r[i]).id!=t?n.push('<option value="'+d.id+'">'+d.name+"</option>"):n.push('<option value="'+d.id+'" selected>'+d.name+"</option>");$province.html(n.join(""))}}function n(e,t,n){var i,d,a,o,r=$("select[data-address-type='district'][data-address-zone='"+e+"']");if(r){if(!t)return r.val(""),r.attr("disabled","disabled"),void r.html("");for(i=s.filter(function(e){return e.province_id==t}),d=['<option value="" hidden>-- Chọn --</option>'],a=0;a<i.length;a++)(o=i[a]).id!=n?d.push('<option value="'+o.id+'">'+o.name+"</option>"):d.push('<option value="'+o.id+'" selected>'+o.name+"</option>");r.removeAttr("disabled"),r.html(d.join(""))}}function i(e,t,n){var i,d,a,o,r=$('select[data-address-type="ward"][data-address-zone="'+e+'"]');if(r){if(!t)return r.val(""),r.attr("disabled","disabled"),void r.html("");for(i=['<option value="" hidden>-- Chọn --</option>'],d=c.filter(function(e){return e.district_id==t}),a=0;a<d.length;a++)(o=d[a]).id!=n?i.push('<option value="'+o.id+'">'+o.name+"</option>"):i.push('<option value="'+o.id+'" selected>'+o.name+"</option>");r.removeAttr("disabled"),r.html(i.join(""))}}function d(){return l?{then:function(e){return e()}}:fetch("//cdn.jsdelivr.net/gh/xemayvinhtruong/js/addresses.json").then(function(e){return e.json()}).then(function(e){r=e.provinces,s=e.districts,c=e.wards,l=!0})}function a(){}function o(e,t){$('select[data-address-type="'+t+'"][data-address-zone="'+e+'"]').trigger("address:change")}var r=[],s=[],c=[],l=!1;a.prototype.bind=function(){return $("body").on("change","select[data-address-type]",function(e){var t=e.target.getAttribute("data-address-type"),d=e.target.getAttribute("data-address-zone");"province"===t?(o(d,"province"),n(d,e.target.value,void 0),o(d,"district"),i(d,"",void 0),o(d,"ward")):"district"===t&&(o(d,"district"),i(d,e.target.value,void 0),o(d,"ward"))}),this},a.prototype.refresh=function(e){var a,r={};$("[data-address-zone]").each(function(){var e,t=$(this),n=t.data("address-type");n&&(e=t.data("address-zone"),(r[e]||(r[e]={}))[n]=t.val()||t.attr("value"))}),0!=(a=Object.keys(r)).length&&d().then(function(){a.forEach(function(e){var d=r[e];t(e,d.province),o(e,"province"),n(e,d.province,d.district),o(e,"district"),i(e,d.district,d.ward),o(e,"ward")}),e&&e()})},e.Address=new a}(window),$(function(){z("//cdnjs.cloudflare.com/ajax/libs/select2/4.1.0-beta.1/css/select2.min.css","css"),Address.bind().refresh()});
