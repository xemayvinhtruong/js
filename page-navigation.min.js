// Name: Blogger Page Navigation Plugin
// Author: Viá»‡t Designer
// Website: www.thietkeblogspot.com
var pageNo,currentPage,currentPageNo,category,postNo=pageConf.numposts,locationUrl=location.href;function startPagination(e){var a="";pageNumber=parseInt(pageConf.numpages/2),pageNumber==pageConf.numpages-pageNumber&&(pageConf.numpages=2*pageNumber+1),pageStart=currentPageNo-pageNumber,pageStart<1&&(pageStart=1),lastPageNo=parseInt(e/postNo)+1,lastPageNo-1==e/postNo&&(lastPageNo-=1),pageEnd=pageStart+pageConf.numpages-1,pageEnd>lastPageNo&&(pageEnd=lastPageNo);var t=parseInt(currentPageNo)-1;currentPageNo>1&&(a+=2==currentPageNo?"page"==currentPage?'<a class="page-number prev" href='+home_page+' title="'+pageConf.prevtext+'">'+pageConf.prev+"</a>":'<a class="page-number prev" href="/search/label/'+category+"?max-results="+postNo+'" title="'+pageConf.prevtext+'">'+pageConf.prev+"</a>":"page"==currentPage?'<a class="page-number prev" href="javascript:void(0)" onclick="getPage('+t+');return false" rel="prev" title="'+pageConf.prevtext+'">'+pageConf.prev+"</a>":'<a class="page-number prev" href="javascript:void(0)" onclick="getLabelPage('+t+');return false" rel="prev" title="'+pageConf.prevtext+'">'+pageConf.prev+"</a>");for(var r=pageStart;r<=pageEnd;r++)a+=currentPageNo==r?'<span class="page-number current">'+r+"</span>":1==r?"page"==currentPage?'<a class="page-number" href='+home_page+' title="'+pageConf.pagetext+' 1">1</a>':'<a class="page-number" href="/search/label/'+category+"?max-results="+postNo+'" title="'+pageConf.pagetext+' 1">1</a>':"page"==currentPage?'<a class="page-number" href="javascript:void(0)" onclick="getPage('+r+');return false" title="'+pageConf.pagetext+" "+r+'">'+r+"</a>":'<a class="page-number" href="javascript:void(0)" onclick="getLabelPage('+r+');return false" title="'+pageConf.pagetext+" "+r+'">'+r+"</a>";var n=parseInt(currentPageNo)+1;currentPageNo<lastPageNo&&(a+="page"==currentPage?'<a class="page-number next" href="javascript:void(0)" onclick="getPage('+n+');return false" rel="next" title="'+pageConf.nexttext+'">'+pageConf.next+"</a>":'<a class="page-number next" href="javascript:void(0)" onclick="getLabelPage('+n+');return false" rel="next" title="'+pageConf.nexttext+'">'+pageConf.next+"</a>");var s=document.getElementById("blog-pager");s&&(s.innerHTML=a)}function dataFeed(e){var a=e.feed;startPagination(parseInt(a.openSearch$totalResults.$t,10))}function pageCurrentBlogger(){var e=locationUrl;-1!=e.indexOf("/search/label/")&&(category=-1!=e.indexOf("?updated-max")?e.substring(e.indexOf("/search/label/")+14,e.indexOf("?updated-max")):e.substring(e.indexOf("/search/label/")+14,e.indexOf("?max"))),-1==e.indexOf("?q=")&&-1==e.indexOf(".html")&&(-1==e.indexOf("/search/label/")?(currentPage="page",currentPageNo=-1!=locationUrl.indexOf("&page=")?locationUrl.substring(locationUrl.indexOf("&page=")+6,locationUrl.length):1,document.write("<script src='"+home_page+"feeds/posts/summary?max-results=1&alt=json-in-script&callback=dataFeed'><\/script>")):(currentPage="label",-1==e.indexOf("&max-results=")&&(postNo=pageConf.numposts),currentPageNo=-1!=locationUrl.indexOf("&page=")?locationUrl.substring(locationUrl.indexOf("&page=")+6,locationUrl.length):1,document.write('<script src="'+home_page+"feeds/posts/summary/-/"+category+'?alt=json-in-script&callback=dataFeed&max-results=1"><\/script>')))}function getPage(e){jsonstart=(e-1)*postNo,pageNo=e;var a=document.getElementsByTagName("head")[0],t=document.createElement("script");t.setAttribute("src",home_page+"feeds/posts/summary?start-index="+jsonstart+"&max-results=1&alt=json-in-script&callback=findPostDate"),a.appendChild(t)}function getLabelPage(e){jsonstart=(e-1)*postNo,pageNo=e;var a=document.getElementsByTagName("head")[0],t=document.createElement("script");t.setAttribute("src",home_page+"feeds/posts/summary/-/"+category+"?start-index="+jsonstart+"&max-results=1&alt=json-in-script&callback=findPostDate"),a.appendChild(t)}function findPostDate(e){post=e.feed.entry[0];var a=post.published.$t.substring(0,19)+post.published.$t.substring(23,29),t=encodeURIComponent(a);if("page"==currentPage)var r="/search?updated-max="+t+"&max-results="+postNo+"&page="+pageNo;else r="/search/label/"+category+"?updated-max="+t+"&max-results="+postNo+"&page="+pageNo;location.href=r}pageCurrentBlogger();
