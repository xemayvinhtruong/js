// Name: Blogger Add To Cart Plugin
// Author: Việt Designer
// Website: www.thietkeblogspot.com
if(document.getElementById("plugin-custom")&&$("li.html").hasClass("widget_shopping_cart")&&$("#post-id").attr("data-blogid")==blogId){console.log("Add to cart is installed, version 3.5.2");var cart_item,cart_item_total,cart_html,id_sp,url_sp,ten_sp,anh_sp,sl_sp,gia_sp,thanh_tien,remove_item,total_product,count,counter,slsp,subtotal,thanh_tien_update,phi_ship,shipping_table,message_wrapper="",cart_empty_page='<div class="text-center pt pb"><div class="woocommerce-notices-wrapper"></div><p class="cart-empty">'+cart_empty_page_text+'</p><p class="return-to-shop"><a class="button primary wc-backward" href='+pageConf.shopurl+' title="'+return_shop_text+'">'+return_shop_text+"</a></p></div>";$(document).ready(function(){var e,t,a=[],o="<a href="+pageConf.carturl+' class="button wc-forward">'+cart_text+"</a>",s="<a href="+pageConf.checkouturl+' class="button checkout wc-forward">'+pay_text+"</a>",r='<p class="woocommerce-mini-cart__empty-message">'+cart_empty_text+"</p>";function c(){if(t=localStorage.getItem("postid_added")){$("#post-id").html(t);for(var o=document.querySelector("#post-id").getElementsByTagName("span"),s=0;s<o.length;s++)a.push(o[s].id);$(".single_add_to_cart_button").each(function(){e=this.value,a.includes(e)&&$(this).attr("disabled","true").html(sp_da_them)})}}function l(){var e=$(this);e.addClass("loading"),id_sp=this.value,$("#post-id").append("<span id="+id_sp+"></span>"),t=$("#post-id").html(),localStorage.setItem("postid_added",t),$.ajax({type:"GET",url:"/feeds/posts/default/"+id_sp,data:{alt:"json-in-script"},dataType:"jsonp",success:function(t){if(t.entry){for(var a=t.entry,r=0;r<a.link.length;r++)if("alternate"==a.link[r].rel){url_sp=a.link[r].href;break}if("category"in a&&(gia_sp=a.category[0].term),"media$thumbnail"in a?anh_sp=a.media$thumbnail.url.replace("s72-c","s76"):"enclosure"==a.link[0].rel&&("image/png"!=a.link[0].type&&"image/jpg"!=a.link[0].type&&"image/jpeg"!=a.link[0].type||(anh_sp=a.link[0].href)),ten_sp=a.title.$t,void 0===(sl_sp=e.parent().find("input.input-text").val())&&(sl_sp=1),thanh_tien=sl_sp*gia_sp,remove_item=pageConf.carturl+"?remove_item="+id_sp,cart_item='<li class="woocommerce-mini-cart-item mini_cart_item"><a href='+remove_item+' class="remove remove_item_from_cart" title="Remove this item">×</a><a href='+url_sp+' title="'+ten_sp+'"><img src='+anh_sp+' alt="'+ten_sp+'">'+ten_sp+'</a><span class="quantity"><label class="sl">'+sl_sp+'</label> × <span class="woocommerce-Price-amount amount"><span class="woocommerce-Price-amount amount"><label class="gia">'+curr(gia_sp,".",",")+'</label><span class="woocommerce-Price-currencySymbol">'+dv_tt+"</span></span></li>",cart_item_total=$(".woocommerce-mini-cart").html(),localStorage.setItem("saved_item",cart_item_total),cart_item_total){var c=localStorage.getItem("saved_item");thanh_tien_update=localStorage.getItem("saved_tien"),subtotal=Number(thanh_tien)+Number(thanh_tien_update);var l='<li class="woocommerce-mini-cart-item mini_cart_item"><a href='+remove_item+' class="remove remove_item_from_cart" title="Remove this item">×</a><a href='+url_sp+' title="'+ten_sp+'"><img src='+anh_sp+' alt="'+ten_sp+'">'+ten_sp+'</a><span class="quantity"><label class="sl">'+sl_sp+'</label> × <span class="woocommerce-Price-amount amount"><span class="woocommerce-Price-amount amount"><label class="gia">'+curr(gia_sp,".",",")+'</label><span class="woocommerce-Price-currencySymbol">'+dv_tt+"</span></span></li>";total_product='<ul class="woocommerce-mini-cart cart_list product_list_widget">'+c+l+'</ul><p class="woocommerce-mini-cart__total total"><strong>'+subtotal_text+': </strong><span class="woocommerce-Price-amount amount"><span class="woocommerce-Price-currency">'+curr(subtotal,".",",")+'</span><span class="woocommerce-Price-currencySymbol">'+dv_tt+'</span></span></p><p class="woocommerce-mini-cart__buttons buttons">'+o+s+"</p>"}else total_product='<ul class="woocommerce-mini-cart cart_list product_list_widget">'+cart_item+'</ul><p class="woocommerce-mini-cart__total total"><strong>'+subtotal_text+': </strong><span class="woocommerce-Price-amount amount"><span class="woocommerce-Price-currency">'+curr(thanh_tien,".",",")+'</span><span class="woocommerce-Price-currencySymbol">'+dv_tt+'</span></span></p><p class="woocommerce-mini-cart__buttons buttons">'+o+s+"</p>";count=Number($("i.icon-shopping-basket").attr("data-icon-label")),$(".widget_shopping_cart_content").html(total_product),$("i.icon-shopping-basket").attr("data-icon-label",count+1),count=$("i.icon-shopping-basket").attr("data-icon-label"),localStorage.setItem("saved_counter",count),cart_html=$(".widget_shopping_cart_content").html(),subtotal=$(".woocommerce-Price-currency").html().replace(/,/gi,""),localStorage.setItem("saved_tien",subtotal),localStorage.setItem("luu_ten_sp",ten_sp),localStorage.setItem("saved_data",cart_html),location.reload(),$(window).scrollTop(0)}}})}if(c(),$(".single_add_to_cart_button").on("click",l),$(".quick-view-added").on("click",function(e){e.preventDefault(),$(this).parent().parent().addClass("processing");var t=$(this).attr("data-id");$.ajax({type:"GET",url:"/feeds/posts/default/"+t,data:{alt:"json-in-script"},dataType:"jsonp",success:function(e){if($(".processing").removeClass("processing"),e.entry){for(var t="",a="",o="",s="",r=e.entry,n=r.id.$t.replace("tag:blogger.com,1999:blog-"+blogId+".post-",""),i=r.title.$t,m=0;m<r.link.length;m++)if("alternate"==r.link[m].rel){var p=r.link[m].href;break}for(var d=0;d<r.link.length;d++)"enclosure"==r.link[d].rel&&("image/png"!=r.link[d].type&&"image/jpg"!=r.link[d].type&&"image/jpeg"!=r.link[d].type||(t+='<div class="slide"><img alt="'+i+'" src='+r.link[d].href+"></div>"));if("media$thumbnail"in r)var u=r.media$thumbnail.url.replace("s72-c","s1600");else{var _=r.content.$t,g=_.indexOf("<img"),v=_.indexOf('src="',g),h=_.indexOf('"',v+5),b=_.substr(v+5,h-v-5);u=-1!=g&&-1!=v&&-1!=h&&""!=b?b:thumbnail_url}if("category"in r)for(var w=curr(r.category[0].term,".",","),f=curr(r.category[1].term,".",","),y="",S="",k=1;k<r.category.length;k++){var I=(S+=r.category[k].term).indexOf(strn),P=S.indexOf(strm),x=S.indexOf(stock),C=S.slice(I,Number(I)+strn.length),N=S.slice(P,Number(P)+strm.length),T=S.slice(x,Number(x)+stock.length),D=r.category[1].term;D!=f?[strs,strn,strm,strh,stock,D].includes(r.category[k].term)||(y+='<a href="/search/label/'+r.category[k].term+"?max-results="+pageConf.numposts+'" rel="tag" title="'+r.category[k].term+'">'+r.category[k].term+"</a>"):[strs,strn,strm,strh,stock].includes(r.category[k].term)||(y+='<a href="/search/label/'+r.category[k].term+"?max-results="+pageConf.numposts+'" rel="tag" title="'+r.category[k].term+'">'+r.category[k].term+"</a>")}if("content"in r){var q,j=(q=r.content.$t).lastIndexOf("<a name='more'></a>");if(j)var O=q.substring(0,Number(j));else(q=q.replace(/<\S[^>]*>/g,"")).length<snippets||(O=(q=q.substring(0,snippets)).substring(0,q.lastIndexOf(" ")))}else O="";var B='<div class="slider product-gallery-slider mb-0 flickity-enabled is-draggable"><div class="slide first"><img alt="'+i+'" src='+u+"></div>"+t+"</div>";o='<div class="price-wrapper"><p class="price product-page-price"><span class="woocommerce-Price-amount amount">'+w+'</span><span class="woocommerce-Price-currencySymbol">'+dv_tt+"</span></p></div>",C===strn&&N===strm?(a='<div class="callout badge badge-circle"><div class="badge-inner secondary on-sale"><span class="onsale">Sale!</span></div></div><div class="badge callout badge-circle"><div class="badge-inner callout-new-bg is-small new-bubble">New</div></div>',o='<div class="price-wrapper"><p class="price product-page-price price-on-sale"><del><span class="woocommerce-Price-amount amount">'+f+'<span class="woocommerce-Price-currencySymbol">'+dv_tt+'</span></span></del><ins><span class="woocommerce-Price-amount amount">'+w+'</span><span class="woocommerce-Price-currencySymbol">'+dv_tt+"</span></ins></p></div>"):C===strn?(a='<div class="callout badge badge-circle"><div class="badge-inner secondary on-sale"><span class="onsale">Sale!</span></div></div>',o='<div class="price-wrapper"><p class="price product-page-price price-on-sale"><del><span class="woocommerce-Price-amount amount">'+f+'<span class="woocommerce-Price-currencySymbol">'+dv_tt+'</span></span></del><ins><span class="woocommerce-Price-amount amount">'+w+'</span><span class="woocommerce-Price-currencySymbol">'+dv_tt+"</span></ins></p></div>"):N===strm&&(a='<div class="badge callout badge-circle"><div class="badge-inner callout-new-bg is-small new-bubble">New</div></div>'),s=T==stock?'<div class="product-lightbox lightbox-content"><div class="product-quick-view-container"><div class="row row-collapse mb-0 product"><div class="product-gallery large-6 col">'+B+'<div class="badge-container is-larger absolute left top z-1">'+a+'</div></div><div class="product-info summary large-6 col entry-summary"><div class="product-lightbox-inner"><a class="plain" href='+p+' title="'+i+'"><h2>'+i+'</h2></a><div class="is-divider small"></div>'+o+'<div class="product-short-description">'+O+'</div><div class="product-unavailable"><p class="out-of-stock"><strong>'+stock_text+'</strong></p></div><div class="product_meta"><span class="posted_in tags">Categories: '+y+"</span></div></div></div></div></div>":'<div class="product-lightbox lightbox-content"><div class="product-quick-view-container"><div class="row row-collapse mb-0 product"><div class="product-gallery large-6 col">'+B+'<div class="badge-container is-larger absolute left top z-1">'+a+'</div></div><div class="product-info summary large-6 col entry-summary"><div class="product-lightbox-inner"><a class="plain" href='+p+' title="'+i+'"><h2>'+i+'</h2></a><div class="is-divider small"></div>'+o+'<div class="product-short-description">'+O+'</div><form class="cart">'+quantity+'<button aria-label="'+cart_button_text+'" class="single_add_to_cart_button button alt" name="'+i+'" type="submit" value="'+n+'">'+cart_button_text+'</button></form><div class="product_meta"><span class="posted_in tags">Categories: '+y+"</span></div></div></div></div></div>",$.magnificPopup.open({removalDelay:300,closeBtnInside:!0,autoFocusLast:!1,items:{src:s,type:"inline"}}),$(".product-gallery-slider").flickity({autoPlay:3e3,imagesLoaded:!0,pauseAutoPlayOnHover:!0},"resize"),$(".single_add_to_cart_button").on("click",l),c()}}})}),(ten_sp=localStorage.getItem("luu_ten_sp"))&&($(".cart-item.has-dropdown").addClass("current-dropdown"),message_wrapper='<div class="woocommerce-message message-wrapper" role="alert"><div class="message-container container success-color medium-text-center"><i class="icon-checkmark"></i> “'+ten_sp+"” "+message_wrapper_text+"</div></div>",$(message_wrapper).insertBefore($("main#main")),localStorage.removeItem("luu_ten_sp")),local_data=localStorage.getItem("saved_data")){$(".widget_shopping_cart_content").html(local_data),subtotal=Number($(".woocommerce-Price-currency").html().replace(/,/gi,"")),counter=localStorage.getItem("saved_counter"),$("tr.cart-subtotal>td>.woocommerce-Price-amount").html(curr(subtotal,".",",")),$("i.icon-shopping-basket").attr("data-icon-label",counter);var n,i,m,p,d,u,_,g,v,h,b,w,f="",y="",S="",k=$("#blog-posts>.woocommerce").attr("id"),I=$(".widget_shopping_cart ul.product_list_widget li"),P=$("#post-id span");function x(){""!=u&&($(".payment_methods li.woocommerce-notice").remove(),$(".payment_methods li.for_cash,.payment_methods li.for_bank_transfer").show())}$(I).each(function(e){var a=$(this),o=a.find("a:nth-of-type(1)");remove_item=a.find("a:nth-of-type(1)").attr("href"),url_sp=a.find("a:nth-of-type(2)").attr("href"),ten_sp=a.find("a:nth-of-type(2)").attr("title"),anh_sp=a.find("a:nth-of-type(2) img").attr("src"),sl_sp=a.find("label.sl").html(),gia_sp=a.find("label.gia").html().replace(/,/gi,""),thanh_tien=sl_sp*gia_sp,n+='<tr class="cart_item"><td class="product-remove"><a href='+remove_item+' class="remove" aria-label="Remove this item">×</a></td><td class="product-thumbnail"><a href='+url_sp+'><img alt="'+ten_sp+'" src='+anh_sp+'></a></td><td class="product-name" data-title="Product"><a href='+url_sp+">"+ten_sp+'</a><div class="show-for-small mobile-product-price"><span class="mobile-product-price__qty">'+sl_sp+' x </span><span class="woocommerce-Price-amount amount">'+curr(gia_sp,".",",")+'</span><span class="woocommerce-Price-currencySymbol amount">'+dv_tt+'</span></div></td><td class="product-price" data-title="Price"><span class="woocommerce-Price-amount amount">'+curr(gia_sp,".",",")+'</span><span class="woocommerce-Price-currencySymbol amount">'+dv_tt+'</span></td><td class="product-quantity" data-title="Quantity"><div class="quantity buttons_added"><input type="button" value="-" class="minus button is-form"><input class="input-text qty text" max="9999" min="0" inputmode="numeric" name="quantity" pattern="[0-9]*" size="4" type="number" value='+sl_sp+'><input type="button" value="+" class="plus button is-form"></div></td><td class="product-subtotal" data-title="Total"><span class="woocommerce-Price-amount amount">'+curr(thanh_tien,".",",")+'</span><span class="woocommerce-Price-currencySymbol amount">'+dv_tt+"</span></td></tr>",i+='<tr class="cart_item"><td class="product-name">'+ten_sp+' <strong class="product-quantity">× '+sl_sp+'</strong></td><td class="product-total"><span class="woocommerce-Price-amount amount">'+curr(thanh_tien,".",",")+'</span><span class="woocommerce-Price-currencySymbol amount">'+dv_tt+"</span></td></tr>",y+='<tr class="woocommerce-table__line-item order_item"><td class="woocommerce-table__product-name product-name"><a href='+url_sp+' title="'+ten_sp+'">'+ten_sp+'</a><strong class="product-quantity"> × '+sl_sp+'</strong></td><td class="woocommerce-table__product-total product-total"><span class="woocommerce-Price-amount amount">'+curr(thanh_tien,".",",")+' <span class="woocommerce-Price-currencySymbol">'+dv_tt+"</span></span></td></tr>",f+=ten_sp+" x "+sl_sp+" x "+curr(gia_sp,".",",")+dv_tt+" = "+curr(thanh_tien,".",",")+dv_tt+"\n",$(".woocommerce-cart-form").find("tbody").html(n),$("table.woocommerce-table>tbody").html(y),$(".woocommerce-checkout-review-order-table>tbody").html(i),$("table.woocommerce-table>tfoot>tr.order-subtotal>td").html('<span class="woocommerce-Price-amount amount">'+curr(subtotal,".",",")+' <span class="woocommerce-Price-currencySymbol">'+dv_tt+"</span></span"),$(".woocommerce-checkout-review-order-table>tfoot>tr.cart-subtotal>td").html('<span class="woocommerce-Price-amount amount">'+curr(subtotal,".",",")+'</span><span class="woocommerce-Price-currencySymbol amount">'+dv_tt+"</span>"),$(o).click(function(a){a.preventDefault();var o=$(this);e=o.parent().index(),id_sp=$(P[e]).attr("id"),o.parent().addClass("processing"),slsp=Number($("i.icon-shopping-basket").attr("data-icon-label")),setTimeout(function(){slsp>1?(sl_sp=Number(o.parent().find(".sl").html()),gia_sp=Number(o.parent().find(".gia").html().replace(/,/gi,"")),subtotal-=thanh_tien=sl_sp*gia_sp,$(".woocommerce-Price-currency").html(curr(subtotal,".",",")),o.parent().remove(),$(P[e]).remove(),cart_html=$(".widget_shopping_cart_content").html(),$("i.icon-shopping-basket").attr("data-icon-label",slsp-1),count=Number($("i.icon-shopping-basket").attr("data-icon-label")),subtotal=$(".woocommerce-Price-currency").html().replace(/,/gi,""),localStorage.setItem("saved_data",cart_html),localStorage.setItem("saved_tien",subtotal),localStorage.setItem("saved_counter",count),$('.single_add_to_cart_button[value="'+id_sp+'"]').removeAttr("disabled").html(cart_button_text),t=$("#post-id").html(),localStorage.setItem("postid_added",t)):($("i.icon-shopping-basket").attr("data-icon-label",0),$(".widget_shopping_cart_content").html(r),$("#post-id").empty(),$(".single_add_to_cart_button").removeAttr("disabled").html(cart_button_text),localStorage.removeItem("saved_data"),localStorage.removeItem("postid_added"),sessionStorage.removeItem("coupon_saved")),$(".processing").removeClass("processing")},500)});var s=$("tr.cart_item");$(s).each(function(a){var o,c,l,n=$(this).find("td.product-remove a"),i=$(this).find(".button.is-form"),m=$(this).find("input.input-text"),p=$(this).parent().parent().find("button[name=update_cart]");$(n).click(function(a){a.preventDefault();var o=$(this);e=o.parent().parent().index(),$(".woocommerce-cart-form").addClass("processing"),slsp=Number($("i.icon-shopping-basket").attr("data-icon-label")),gia_sp=Number($(I[e]).find(".gia").html().replace(/,/gi,"")),setTimeout(function(){location.reload(),$(window).scrollTop(0),slsp>1?(sl_sp=Number($(I[e]).find(".sl").html()),subtotal-=thanh_tien=sl_sp*gia_sp,$(".woocommerce-Price-currency").html(curr(subtotal,".",",")),$(I[e]).remove(),$(s[e]).remove(),$(P[e]).remove(),cart_html=$(".widget_shopping_cart_content").html(),localStorage.setItem("saved_data",cart_html),$("i.icon-shopping-basket").attr("data-icon-label",slsp-1),count=Number($("i.icon-shopping-basket").attr("data-icon-label")),localStorage.setItem("saved_tien",subtotal),localStorage.setItem("saved_counter",count),t=$("#post-id").html(),localStorage.setItem("postid_added",t)):($("i.icon-shopping-basket").attr("data-icon-label",0),$(".widget_shopping_cart_content").html(r),$(".single_add_to_cart_button").removeAttr("disabled").html(cart_button_text),localStorage.removeItem("saved_data"),localStorage.removeItem("postid_added"),sessionStorage.removeItem("coupon_saved"))},1e3)}),$(i).one("click",function(){$(p).removeAttr("disabled")}),$(i).on("click",function(){o=Number($(m).attr("value")),$(this).hasClass("minus")?(sl_sp=Number($(m).val())-1,l=Math.abs(sl_sp-o)):$(this).hasClass("plus")&&(sl_sp=Number($(m).val())+1,c=sl_sp-o),$(p).click(function(o){o.preventDefault(),e=a,gia_sp=Number($(s[e]).find(".woocommerce-Price-amount").html().replace(/,/gi,"")),$(".woocommerce-cart-form").addClass("processing"),setTimeout(function(){if(sl_sp<=0)(slsp=Number($("i.icon-shopping-basket").attr("data-icon-label")))>1?(subtotal-=thanh_tien=1*gia_sp,$(".woocommerce-Price-currency").html(curr(subtotal,".",",")),$(I[e]).remove(),$(s[e]).remove(),$(P[e]).remove(),cart_html=$(".widget_shopping_cart_content").html(),localStorage.setItem("saved_data",cart_html),$("i.icon-shopping-basket").attr("data-icon-label",slsp-1),count=Number($("i.icon-shopping-basket").attr("data-icon-label")),localStorage.setItem("saved_counter",count),t=$("#post-id").html(),localStorage.setItem("postid_added",t)):($("i.icon-shopping-basket").attr("data-icon-label",0),$(".widget_shopping_cart_content").html(r),$(".single_add_to_cart_button").removeAttr("disabled").html(cart_button_text),localStorage.removeItem("saved_data"),localStorage.removeItem("postid_added"));else{var a="";a=c>=1?subtotal+(thanh_tien=c*gia_sp):subtotal-(thanh_tien=l*gia_sp),$(I[e]).find(".sl").html(sl_sp),$(".woocommerce-Price-currency").html(curr(a,".",",")),cart_html=$(".widget_shopping_cart_content").html(),localStorage.setItem("saved_data",cart_html)}localStorage.setItem("saved_tien",subtotal),location.reload(),$(window).scrollTop(0)},1e3)})})})}),(phi_ship=localStorage.getItem("luu_phi_ship"))&&($(".shipping-calculator-button").html(address_text),$(".shipping__table>tbody>tr>td>span").html('<span class="woocommerce-Price-amount amount">'+curr(phi_ship,".",",")+'</span><span class="woocommerce-Price-currencySymbol amount">'+dv_tt+"</span>"),$("table.woocommerce-table>tfoot>tr.order-shipping>td").html('<span class="woocommerce-Price-amount amount">'+curr(phi_ship,".",",")+' <span class="woocommerce-Price-currencySymbol">'+dv_tt+"</span></span>")),(shipping_table=localStorage.getItem("shipping_table_saved"))&&$(".cart_totals .shipping__table").html(shipping_table),(m=localStorage.getItem("billing_name_saved"))&&$("#billing_name").attr({placeholder:m,value:m}),(p=localStorage.getItem("billing_phone_saved"))&&$("#billing_phone").attr({placeholder:p,value:p}),(d=localStorage.getItem("billing_email_saved"))&&$("#billing_email").attr({placeholder:d,value:d}),(u=localStorage.getItem("address_1_saved"))&&($("select[name=calc_shipping_country]").children("option:selected").val(u).text(u),$("#billing_address_1").attr("value",u),x()),(_=localStorage.getItem("address_2_saved"))&&$("#billing_address_2").attr({placeholder:_,value:_}),(g=localStorage.getItem("address_3_saved"))&&$("#billing_address_3").attr({placeholder:g,value:g}),(v=localStorage.getItem("address_4_saved"))&&$("#billing_address_4").attr({placeholder:v,value:v}),(h=localStorage.getItem("order_comments_saved"))&&$("#order_comments").attr("placeholder",h).html(h),$("#billing_name").keyup(function(){m=$(this).val(),localStorage.setItem("billing_name_saved",m)}),$("#billing_phone").keyup(function(){p=$(this).val(),localStorage.setItem("billing_phone_saved",p)}),$("#billing_email").keyup(function(){d=$(this).val(),localStorage.setItem("billing_email_saved",d)}),$("select[name=calc_shipping_country]").change(function(){u=$(this).children("option:selected").val(),phi_ship=thanh_pho.includes(u)?"0":phi_vc,$(".woocommerce-checkout-review-order-table,.woocommerce-checkout-payment").addClass("processing"),b=subtotal+Number(phi_ship),localStorage.setItem("luu_phi_ship",phi_ship),localStorage.setItem("address_1_saved",u),localStorage.setItem("payment_saved",b),setTimeout(function(){$("#billing_address_1").attr("value",u),$(".processing").removeClass("processing"),$(".shipping__table>tbody>tr>td>span").html('<span class="woocommerce-Price-amount amount">'+curr(phi_ship,".",",")+'</span><span class="woocommerce-Price-currencySymbol amount">'+dv_tt+"</span>"),$("tr.order-total>td>.woocommerce-Price-amount").html(curr(b,".",",")),x()},500)}),$("#billing_address_2").keyup(function(){_=$(this).val(),localStorage.setItem("address_2_saved",_)}),$("#billing_address_3").keyup(function(){g=$(this).val(),localStorage.setItem("address_3_saved",g)}),$("#billing_address_4").keyup(function(){v=$(this).val(),localStorage.setItem("address_4_saved",v)}),$("#order_comments").keyup(function(){h=$(this).val(),localStorage.setItem("order_comments_saved",h)}),$("form[name=shipping]").on("submit",function(e){e.preventDefault();var t=$(this);$(".cart_totals .shipping__table").addClass("processing"),setTimeout(function(){$(".woocommerce-invalid").removeClass("woocommerce-invalid"),$(".processing").removeClass("processing"),t.parent().find("span").html('<span class="woocommerce-Price-amount amount">'+curr(phi_ship,".",",")+'</span><span class="woocommerce-Price-currencySymbol amount">'+dv_tt+"</span"),t.find(".shipping-calculator-button").html(address_text),t.find(".shipping-calculator-form").hide(),$("tr.order-total>td>.woocommerce-Price-amount").html(curr(b,".",",")),shipping_table=$(".cart_totals .shipping__table").html(),localStorage.setItem("shipping_table_saved",shipping_table)},500)}),pageConf.cartid!=pageId&&pageConf.checkoutid!=pageId||(S=sessionStorage.getItem("coupon_saved"))&&(message_wrapper="vi"==langCof?'<ul class="woocommerce-sucess message-wrapper" role="alert"><li><div class="message-container container success-color medium-text-center"><span class="message-icon icon-close"></span>Bạn đã áp dụng mã giảm giá “'+S+"” cho đơn hàng này!</div></li></ul>":'<ul class="woocommerce-sucess message-wrapper" role="alert"><li><div class="message-container container success-color medium-text-center"><span class="message-icon icon-close"></span>Coupon “'+S+"” has been successfully applied for this order!</div></li></ul>",$(message_wrapper).insertBefore($("#blog-posts>.woocommerce")),$("form[name=checkout_coupon] #coupon_code").attr("value",S),$("form[name=checkout_coupon] input[type=submit]").attr("disabled","disabled"),$("form[name=woocommerce-form-coupon] button[type=submit]").attr("disabled","disabled"),$("input#coupon_code").attr("value",S),$(".woocommerce-info.message-wrapper").remove()),k&&subtotal>=gt_dh?($(".woocommerce-form-coupon-toggle,form[name=checkout_coupon]").removeClass("hidden"),$("form[name=checkout_coupon]").on("submit",function(e){e.preventDefault();var t=$(this);S=t.find("#coupon_code").val(),t.find("#coupon_code").attr("value",S),t.addClass("processing"),setTimeout(function(){S!=k?message_wrapper="vi"==langCof?'<ul class="woocommerce-error message-wrapper" role="alert"><li><div class="message-container container alert-color medium-text-center"><span class="message-icon icon-close"></span>Mã giảm giá “'+S+"” không tồn tại!</div></li></ul>":'<ul class="woocommerce-error message-wrapper" role="alert"><li><div class="message-container container alert-color medium-text-center"><span class="message-icon icon-close"></span>Coupon “'+S+"” does not exist!</div></li></ul>":(message_wrapper="vi"==langCof?'<ul class="woocommerce-sucess message-wrapper" role="alert"><li><div class="message-container container success-color medium-text-center"><span class="message-icon icon-close"></span>Mã giảm giá “'+S+"” đã được áp dụng thành công!</div></li></ul>":'<ul class="woocommerce-sucess message-wrapper" role="alert"><li><div class="message-container container success-color medium-text-center"><span class="message-icon icon-close"></span>Coupon “'+S+"” has been successfully applied!</div></li></ul>",t.find("input[type=submit]").attr("disabled","disabled"),sessionStorage.setItem("coupon_saved",S)),$(".message-wrapper").remove(),$(message_wrapper).insertBefore($("#blog-posts>.woocommerce")),$(window).scrollTop("slow"),t.removeClass("processing"),sessionStorage.setItem("get_code_saved",k)},500)}),$("form[name=woocommerce-form-coupon]").on("submit",function(e){e.preventDefault();var t=$(this);S=t.find("#coupon_code").val(),$("input#coupon_code").attr("value",S),t.addClass("processing"),setTimeout(function(){S!=k?message_wrapper="vi"==langCof?'<ul class="woocommerce-error message-wrapper" role="alert"><li><div class="message-container container alert-color medium-text-center"><span class="message-icon icon-close"></span>Mã giảm giá “'+S+"” không tồn tại!</div></li></ul>":'<ul class="woocommerce-error message-wrapper" role="alert"><li><div class="message-container container alert-color medium-text-center"><span class="message-icon icon-close"></span>Coupon “'+S+"” does not exist!</div></li></ul>":(message_wrapper="vi"==langCof?'<ul class="woocommerce-sucess message-wrapper" role="alert"><li><div class="message-container container success-color medium-text-center"><span class="message-icon icon-close"></span>Mã giảm giá “'+S+"” đã được áp dụng thành công!</div></li></ul>":'<ul class="woocommerce-sucess message-wrapper" role="alert"><li><div class="message-container container success-color medium-text-center"><span class="message-icon icon-close"></span>Coupon “'+S+"” has been successfully applied!</div></li></ul>",$(".woocommerce-info.message-wrapper").remove(),t.find("button[type=submit]").attr("disabled","disabled"),sessionStorage.setItem("coupon_saved",S)),$(".message-wrapper:not(.woocommerce-info)").remove(),$(message_wrapper).insertBefore(t),t.removeClass("processing"),t.hide(),sessionStorage.setItem("get_code_saved",k)},500)}),pt_dg=subtotal*Number(pt_dg.replace("%",""))/100,sessionStorage.setItem("luu_pt_dg",pt_dg),"vi"==langCof?$("#coupon").html('Mã giảm giá của bạn: <strong style="color:#d26e4b">'+k+"</strong>"):$("#coupon").html('Your coupon code: <strong style="color:#d26e4b">'+k+"</strong>"),$(".header-gift-icon>a>i").attr("data-icon-label",1),$(".header-gift-icon>a").click(function(e){e.preventDefault(),$.magnificPopup.open({removalDelay:300,closeBtnInside:!0,autoFocusLast:!1,items:{src:"#coupon",type:"inline"}})})):(pt_dg=0,sessionStorage.removeItem("coupon_saved"),$(".gift-code").remove()),pageConf.orderid==pageId&&((k=sessionStorage.getItem("get_code_saved"))?(pt_dg=sessionStorage.getItem("luu_pt_dg"),S=sessionStorage.getItem("get_code_saved")):(pt_dg=0,S=0)),b=subtotal+Number(phi_ship),w=subtotal-pt_dg,$("tr.order-total>td>.woocommerce-Price-amount").html(curr(b,".",",")),$("textarea#order_total").html(f),$("input#sub_total").attr("value",curr(subtotal,".",",")+dv_tt),$("input#shipping_price").attr("value",curr(phi_ship,".",",")+dv_tt),$("table.woocommerce-table>tfoot>tr.order-coupon>td").html('<span class="woocommerce-Price-amount amount">'+curr(pt_dg,".",",")+' <span class="woocommerce-Price-currencySymbol">'+dv_tt+"</span></span>"),$("input#paymet_total").attr("value",curr(w,".",",")+dv_tt),$("table.woocommerce-table>tfoot>tr.order-total>td").html('<span class="woocommerce-Price-amount amount">'+curr(w,".",",")+' <span class="woocommerce-Price-currencySymbol">'+dv_tt+"</span></span>"),"vi"==langCof?$("ul.woocommerce-order-overview").append('<li class="woocommerce-order-overview__order">Số sản phẩm: <strong>'+counter+'</strong></li><li class="woocommerce-order-overview__date">Ngày: <strong>'+(new Date).getDate()+"/"+((new Date).getMonth()+1)+"/"+(new Date).getFullYear()+'</strong></li><li class="woocommerce-order-overview__coupon">Mã giảm giá: <strong>'+S+'</strong></li><li class="woocommerce-order-overview__total total">Tổng cộng: <strong><span class="woocommerce-Price-amount amount">'+curr(w,".",",")+' <span class="woocommerce-Price-currencySymbol">'+dv_tt+'</span></span></strong></li><li class="woocommerce-order-overview__payment-method method">Phương thức thanh toán: <strong>'+localStorage.getItem("for_payment_saved")+"</strong></li>"):$("ul.woocommerce-order-overview").append('<li class="woocommerce-order-overview__order">Products number: <strong>'+counter+'</strong></li><li class="woocommerce-order-overview__date">Order date: <strong>'+(new Date).getDate()+"/"+((new Date).getMonth()+1)+"/"+(new Date).getFullYear()+'</strong></li><li class="woocommerce-order-overview__coupon">Coupon code: <strong>'+S+'</strong></li><li class="woocommerce-order-overview__total total">Total: <strong><span class="woocommerce-Price-amount amount">'+curr(w,".",",")+' <span class="woocommerce-Price-currencySymbol">'+dv_tt+'</span></span></strong></li><li class="woocommerce-order-overview__payment-method method">Payment method: <strong>'+localStorage.getItem("for_payment_saved")+"</strong></li>"),$(".shipping-calculator-button").click(function(e){e.preventDefault(),$(".shipping-calculator-form").slideToggle("slow")}),$(".message-container a").click(function(e){e.preventDefault(),$("form[name=woocommerce-form-coupon]").slideToggle("slow")}),$(".validate-required").each(function(){var e=$(this),t=e.find("input").attr("value");$('button[name="calc_shipping"],button[name="woocommerce_checkout_place_order"]').click(function(){""==t&&e.addClass("woocommerce-invalid")})}),$(".payment_methods li").click(function(){var e=$(this).find(".payment_box"),t=$(this).find("input").attr("value");e.show("slow"),$(".payment_box").not(e).hide(),localStorage.setItem("for_payment_saved",t)}),setTimeout(function(){$(".processing").removeClass("processing")},500),$('form[name="checkout"]').on("submit",function(){$(this).addClass("processing"),setTimeout(function(){$(".processing").removeClass("processing"),location.href=pageConf.orderurl},1e3)})}}),pageConf.cartid==pageId?null===localStorage.getItem("saved_data")&&$(".woocommerce").html(cart_empty_page):pageConf.checkoutid==pageId?null===localStorage.getItem("saved_data")&&(location.href=pageConf.carturl):pageConf.orderid==pageId&&(null!=localStorage.getItem("saved_data")?$(window).unload(function(){localStorage.removeItem("postid_added"),localStorage.removeItem("saved_data"),sessionStorage.removeItem("get_code_saved")}):location.href=pageConf.carturl)}
