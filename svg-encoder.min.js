var doc=document,initTextarea=doc.querySelector("#init"),resultTextarea=doc.querySelector("#result"),resultCssTextarea=doc.querySelector("#result-css"),resultDemo=doc.querySelector("#demo"),demoWrapper=doc.querySelector(".demo-wrapper"),contrastButtons=doc.querySelectorAll(".contrast-button"),contrastButtonCurrent=null,backgroundColor="",expanders=doc.querySelectorAll(".expander"),expandedClass="expanded",demoContrastClass="demo-contrast-on",symbols=/[\r\n%#()<>?\[\\\]^`{|}]/g;const quotesInputs=document.querySelectorAll(".options__input");let externalQuotesValue=document.querySelector(".options__input:checked").value,quotes=getQuotes();const buttonExample=document.querySelector(".button-example");function getResults(){if(!initTextarea.value)return resultCssTextarea.value="",void resultDemo.setAttribute("style","");var e=encodeSVG(addNameSpace(initTextarea.value));resultTextarea.value=e;var t=`background-image: url(${quotes.level1}data:image/svg+xml,${e}${quotes.level1});`;resultCssTextarea.value=t,resultDemo.setAttribute("style",t)}initTextarea.oninput=function(){resultTextarea.value=encodeSVG(initTextarea.value),getResults()},initTextarea.onkeyup=function(){getResults()};for(var i=0;i<expanders.length;i++){var expander=expanders[i];expander.onclick=function(){this.parentNode.querySelector("."+expandedClass).classList.toggle("hidden"),this.classList.toggle("opened")}}function contrastButtonsSetCurrent(e){contrastButtonCurrent&&contrastButtonCurrent.classList.remove("contrast-button--current"),backgroundColor=e.dataset.color,contrastButtonCurrent=e,e.classList.add("contrast-button--current")}function addNameSpace(e){return e.indexOf("http://www.w3.org/2000/svg")<0&&(e=e.replace(/<svg/g,`<svg xmlns=${quotes.level2}http://www.w3.org/2000/svg${quotes.level2}`)),e}function encodeSVG(e){return(e=(e=(e="double"===externalQuotesValue?e.replace(/"/g,"'"):e.replace(/'/g,'"')).replace(/>\s{1,}</g,"><")).replace(/\s{2,}/g," ")).replace(symbols,encodeURIComponent)}function getQuotes(){return{level1:"double"===externalQuotesValue?'"':"'",level2:"double"===externalQuotesValue?"'":'"'}}quotesInputs.forEach(e=>{e.addEventListener("input",function(){externalQuotesValue=this.value,quotes=getQuotes(),getResults()})}),buttonExample.addEventListener("click",()=>{initTextarea.value='<svg>\n        <circle r="50" cx="50" cy="50" fill="tomato"/>\n        <circle r="41" cx="47" cy="50" fill="orange"/>\n        <circle r="33" cx="48" cy="53" fill="gold"/>\n        <circle r="25" cx="49" cy="51" fill="yellowgreen"/>\n        <circle r="17" cx="52" cy="50" fill="lightseagreen"/>\n        <circle r="9" cx="55" cy="48" fill="teal"/>\n      </svg>',getResults()}),contrastButtons.forEach(e=>{backgroundColor||contrastButtonsSetCurrent(e),e.addEventListener("click",function(){contrastButtonsSetCurrent(this),demoWrapper.style.background=backgroundColor})});
